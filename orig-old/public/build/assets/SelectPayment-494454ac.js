import{r as d,e as I,j as N,F as Y,a as f,H as ee,d as te}from"./app-b3d1e4ff.js";import{S as re}from"./Sidebar-8794ff43.js";import{A as ne}from"./app-69423823.js";var M="https://js.stripe.com/v3",ae=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,U="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ie=function(){for(var t=document.querySelectorAll('script[src^="'.concat(M,'"]')),r=0;r<t.length;r++){var n=t[r];if(ae.test(n.src))return n}return null},oe=function(t){var r=t&&!t.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(M).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},ce=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"1.46.0",startTime:r})},w=null,se=function(t){return w!==null||(w=new Promise(function(r,n){if(typeof window>"u"){r(null);return}if(window.Stripe&&t&&console.warn(U),window.Stripe){r(window.Stripe);return}try{var a=ie();a&&t?console.warn(U):a||(a=oe(t)),a.addEventListener("load",function(){window.Stripe?r(window.Stripe):n(new Error("Stripe.js not available"))}),a.addEventListener("error",function(){n(new Error("Failed to load Stripe.js"))})}catch(i){n(i);return}})),w},ue=function(t,r,n){if(t===null)return null;var a=t.apply(void 0,r);return ce(a,n),a},k=Promise.resolve().then(function(){return se(null)}),q=!1;k.catch(function(e){q||console.warn(e)});var de=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];q=!0;var a=Date.now();return k.then(function(i){return ue(i,r,a)})};var l;(function(e){e.INITIAL="initial",e.PENDING="pending",e.REJECTED="rejected",e.RESOLVED="resolved"})(l||(l={}));var v;(function(e){e.LOADING_STATUS="setLoadingStatus",e.RESET_OPTIONS="resetOptions",e.SET_BRAINTREE_INSTANCE="braintreeInstance"})(v||(v={}));var L;(function(e){e.NUMBER="number",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.EXPIRATION_MONTH="expirationMonth",e.EXPIRATION_YEAR="expirationYear",e.POSTAL_CODE="postalCode"})(L||(L={}));var A="data-react-paypal-script-id",m={DATA_CLIENT_TOKEN:"data-client-token",DATA_USER_ID_TOKEN:"data-user-id-token",DATA_SDK_INTEGRATION_SOURCE:"data-sdk-integration-source",DATA_SDK_INTEGRATION_SOURCE_VALUE:"react-paypal-js",DATA_NAMESPACE:"data-namespace"},le="Failed to load the PayPal JS SDK script.",K="paypal",fe="usePayPalScriptReducer must be used within a PayPalScriptProvider",u=function(){return u=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},u.apply(this,arguments)};function pe(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function B(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ve(e){return e===void 0&&(e=K),window[e]}function he(e){for(var t="",r=0;r<e.length;r++){var n=e[r].charCodeAt(0)*r;e[r+1]&&(n+=e[r+1].charCodeAt(0)*(r-1)),t+=String.fromCharCode(97+Math.abs(n)%26)}return t}function Se(e){var t=e.reactComponentName,r=e.sdkComponentKey,n=e.sdkRequestedComponents,a=n===void 0?"":n,i=e.sdkDataNamespace,o=i===void 0?K:i,c=r.charAt(0).toUpperCase().concat(r.substring(1)),s="Unable to render <".concat(t," /> because window.").concat(o,".").concat(c," is undefined.");if(!a.includes(r)){var p=[a,r].filter(Boolean).join();s+=`
To fix the issue, add '`.concat(r,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(p,"'}}>`.")}return s}function V(e){return"react-paypal-js-".concat(he(JSON.stringify(e)))}function me(e){var t=self.document.querySelector("script[".concat(A,'="').concat(e,'"]'));t!=null&&t.parentNode&&t.parentNode.removeChild(t)}function Ee(e,t){var r;switch(t.type){case v.LOADING_STATUS:return u(u({},e),{loadingStatus:t.value});case v.RESET_OPTIONS:return me(e.options[A]),delete t.value[A],u(u({},e),{loadingStatus:l.PENDING,options:u(u({},t.value),(r={},r[A]="".concat(V(t.value)),r[m.DATA_SDK_INTEGRATION_SOURCE]=m.DATA_SDK_INTEGRATION_SOURCE_VALUE,r))});case v.SET_BRAINTREE_INSTANCE:return u(u({},e),{braintreePayPalCheckoutInstance:t.value});default:return e}}var W=d.exports.createContext(null);function ge(e){if(typeof(e==null?void 0:e.dispatch)=="function"&&e.dispatch.length!==0)return e;throw new Error(fe)}function ye(){var e=ge(d.exports.useContext(W)),t=u(u({},e),{isInitial:e.loadingStatus===l.INITIAL,isPending:e.loadingStatus===l.PENDING,isResolved:e.loadingStatus===l.RESOLVED,isRejected:e.loadingStatus===l.REJECTED});return[t,e.dispatch]}d.exports.createContext({});var O=function(e){var t=e.className,r=t===void 0?"":t,n=e.disabled,a=n===void 0?!1:n,i=e.children,o=e.forceReRender,c=o===void 0?[]:o,s=pe(e,["className","disabled","children","forceReRender"]),p=a?{opacity:.38}:{},h="".concat(r," ").concat(a?"paypal-buttons-disabled":"").trim(),S=d.exports.useRef(null),E=d.exports.useRef(null),P=ye()[0],C=P.isResolved,R=P.options,D=d.exports.useState(null),b=D[0],$=D[1],x=d.exports.useState(!0),z=x[0],Q=x[1],Z=d.exports.useState(null),T=Z[1];function g(){E.current!==null&&E.current.close().catch(function(){})}return d.exports.useEffect(function(){if(C===!1)return g;var _=ve(R[m.DATA_NAMESPACE]);if(_===void 0||_.Buttons===void 0)return T(function(){throw new Error(Se({reactComponentName:O.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:R.components,sdkDataNamespace:R[m.DATA_NAMESPACE]}))}),g;var H=function(y,j){$(j),typeof s.onInit=="function"&&s.onInit(y,j)};try{E.current=_.Buttons(u(u({},s),{onInit:H}))}catch(y){return T(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(y))})}return E.current.isEligible()===!1?(Q(!1),g):(S.current&&E.current.render(S.current).catch(function(y){S.current===null||S.current.children.length===0||T(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(y))})}),g)},B(B([C],c,!0),[s.fundingSource],!1)),d.exports.useEffect(function(){b!==null&&(a===!0?b.disable().catch(function(){}):b.enable().catch(function(){}))},[a,b]),I.createElement(I.Fragment,null,z?I.createElement("div",{ref:S,style:p,className:h}):i)};O.displayName="PayPalButtons";function Ne(e,t){var r=document.querySelector('script[src="'.concat(e,'"]'));if(r===null)return null;var n=F(e,t),a=r.cloneNode();if(delete a.dataset.uidAuto,Object.keys(a.dataset).length!==Object.keys(n.dataset).length)return null;var i=!0;return Object.keys(a.dataset).forEach(function(o){a.dataset[o]!==n.dataset[o]&&(i=!1)}),i?r:null}function Ae(e){var t=e.url,r=e.attributes,n=e.onSuccess,a=e.onError,i=F(t,r);i.onerror=a,i.onload=n,document.head.insertBefore(i,document.head.firstElementChild)}function be(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),Re(e);var r=Object.keys(e).filter(function(i){return typeof e[i]<"u"&&e[i]!==null&&e[i]!==""}).reduce(function(i,o){var c=e[o].toString();return o.substring(0,5)==="data-"?i.dataAttributes[o]=c:i.queryParams[o]=c,i},{queryParams:{},dataAttributes:{}}),n=r.queryParams,a=r.dataAttributes;return{url:"".concat(t,"?").concat(we(n)),dataAttributes:a}}function we(e){var t="";return Object.keys(e).forEach(function(r){t.length!==0&&(t+="&"),t+=r+"="+e[r]}),t}function Ie(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function F(e,t){t===void 0&&(t={});var r=document.createElement("script");return r.src=e,Object.keys(t).forEach(function(n){r.setAttribute(n,t[n]),n==="data-csp-nonce"&&r.setAttribute("nonce",t["data-csp-nonce"])}),r}function Re(e){var t=e["merchant-id"],r=e["data-merchant-id"],n="",a="";return Array.isArray(t)?t.length>1?(n="*",a=t.toString()):n=t.toString():typeof t=="string"&&t.length>0?n=t:typeof r=="string"&&r.length>0&&(n="*",a=r),e["merchant-id"]=n,e["data-merchant-id"]=a,e}function Te(e,t){if(t===void 0&&(t=J()),X(e,t),typeof window>"u")return t.resolve(null);var r=be(e),n=r.url,a=r.dataAttributes,i=a["data-namespace"]||"paypal",o=G(i);return Ne(n,a)&&o?t.resolve(o):_e({url:n,attributes:a},t).then(function(){var c=G(i);if(c)return c;throw new Error("The window.".concat(i," global variable is not available."))})}function _e(e,t){t===void 0&&(t=J()),X(e,t);var r=e.url,n=e.attributes;if(typeof r!="string"||r.length===0)throw new Error("Invalid url.");if(typeof n<"u"&&typeof n!="object")throw new Error("Expected attributes to be an object.");return new t(function(a,i){if(typeof window>"u")return a();Ae({url:r,attributes:n,onSuccess:function(){return a()},onError:function(){var o=new Error('The script "'.concat(r,'" failed to load.'));return window.fetch?fetch(r).then(function(c){return c.status===200&&i(o),c.text()}).then(function(c){var s=Ie(c);i(new Error(s))}).catch(function(c){i(c)}):i(o)}})})}function J(){if(typeof Promise>"u")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function G(e){return window[e]}function X(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Oe=function(e){var t,r=e.options,n=r===void 0?{"client-id":"test"}:r,a=e.children,i=e.deferLoading,o=i===void 0?!1:i,c=d.exports.useReducer(Ee,{options:u(u({},n),(t={},t[A]="".concat(V(n)),t[m.DATA_SDK_INTEGRATION_SOURCE]=m.DATA_SDK_INTEGRATION_SOURCE_VALUE,t)),loadingStatus:o?l.INITIAL:l.PENDING}),s=c[0],p=c[1];return d.exports.useEffect(function(){if(o===!1&&s.loadingStatus===l.INITIAL)return p({type:v.LOADING_STATUS,value:l.PENDING});if(s.loadingStatus===l.PENDING){var h=!0;return Te(s.options).then(function(){h&&p({type:v.LOADING_STATUS,value:l.RESOLVED})}).catch(function(S){console.error("".concat(le," ").concat(S)),h&&p({type:v.LOADING_STATUS,value:l.REJECTED})}),function(){h=!1}}},[s.options,o,s.loadingStatus]),I.createElement(W.Provider,{value:u(u({},s),{dispatch:p})},a)};function xe(e){const[t,r]=d.exports.useState(1),[n,a]=d.exports.useState(null);d.exports.useEffect(()=>{de(e.data.STRIPE_PUBLISHABLE_KEY).then(c=>{a(c)})},[]);const i=o=>{n.redirectToCheckout({mode:"subscription",lineItems:[{price:JSON.parse(o).api_id,quantity:1}],successUrl:e.data.url+"user/payment/success?status=true&method=stripe",cancelUrl:e.data.url+"user/payment/cancel"})};return N(Y,{children:[f(ee,{children:f("title",{children:"Select Payment"})}),f(ne,{logo:e.logo,children:f("div",{className:"container mx-auto my-20",children:N("div",{className:"flex space-x-12",children:[f(re,{}),f("div",{className:"w-3/4",children:N("div",{className:" border rounded-lg py-12 px-8",children:[f("div",{className:" flex items-center justify-center space-x-8 border-b pb-12",children:e.gateways.map((o,c)=>f("div",{children:o.status=="approved"&&f("div",{onClick:()=>r(o.id),className:t===o.id?"border rounded-lg cursor-pointer":" cursor-pointer",children:f("img",{className:" w-40 h-28 object-contain",src:o.logo,alt:""})})},c))}),f("div",{className:" text-center pt-12",children:e.gateways.map((o,c)=>t===o.id&&N("div",{children:[t===2&&o.status=="approved"&&N("a",{onClick:()=>t===2?i(e.plan.data):"",className:"bg-indigo-500 text-white px-12 py-3 rounded-md cursor-pointer",children:[" Pay With ",t===2?"Stripe":"Paypal"]}),t===1&&o.status=="approved"&&f(Oe,{options:{"client-id":e.data.PAYPAL_CLIENT_ID,currency:e.data.currency_name},children:f(O,{createOrder:(s,p)=>p.order.create({purchase_units:[{amount:{value:e.plan.price}}]}),onApprove:(s,p)=>p.order.capture().then(h=>{h.payer.name.given_name,te.Inertia.get(e.data.url+"user/payment/success?status=true&method=paypal")})})})]},c))})]})})]})})})]})}export{xe as default};
